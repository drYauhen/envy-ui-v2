/* Mermaid Diagram Styles for Storybook */

.mermaid-diagram-wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  margin: 24px 0;
  padding: 16px;
  background: #f8fafc;
  border-radius: 8px;
  overflow-x: auto;
  overflow-y: hidden;
}

.mermaid-diagram {
  display: inline-block;
  text-align: center;
  min-width: 100%;
}

.mermaid-diagram svg {
  display: block;
  margin: 0 auto;
  max-width: 100%;
  height: auto;
}

/* Reduce font sizes and node sizes to match document text */
.mermaid-diagram svg {
  font-size: 12px !important; /* Smaller than document text for better fit */
  max-width: 90% !important; /* Prevent diagrams from stretching too wide */
}

.mermaid-diagram svg .nodeLabel,
.mermaid-diagram svg .edgeLabel {
  font-size: 12px !important;
  line-height: 1.4 !important;
}

.mermaid-diagram svg .node rect,
.mermaid-diagram svg .node circle,
.mermaid-diagram svg .node ellipse,
.mermaid-diagram svg .node polygon {
  /* Reduce node padding to make them more compact */
  rx: 4px;
  ry: 4px;
}

/* Ensure text in nodes is readable but not oversized */
.mermaid-diagram svg text {
  font-size: 12px !important;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif !important;
}

/* Compact vertical flowcharts (graph TD - thin, tall) */
.mermaid-diagram svg[data-diagram-type="compact-vertical"] {
  font-size: 11px !important;
}

.mermaid-diagram svg[data-diagram-type="compact-vertical"] .nodeLabel,
.mermaid-diagram svg[data-diagram-type="compact-vertical"] .edgeLabel {
  font-size: 11px !important;
}

/* Wide horizontal flowcharts (graph LR) */
.mermaid-diagram svg[data-diagram-type="wide-horizontal"] {
  font-size: 12px !important;
}

/* Complex diagrams (many nodes) */
.mermaid-diagram svg[data-diagram-type="complex"] {
  font-size: 11px !important;
}

.mermaid-diagram svg[data-diagram-type="complex"] .nodeLabel,
.mermaid-diagram svg[data-diagram-type="complex"] .edgeLabel {
  font-size: 11px !important;
}

/* Limit diagram container width to prevent stretching */
.mermaid-diagram-wrapper {
  max-width: 100%;
}

.mermaid-diagram {
  max-width: 100%;
  overflow-x: auto;
}

/* Reduce spacing between nodes for more compact diagrams */
.mermaid-diagram svg .flowchart-link {
  stroke-width: 1.5px;
}

/* Ensure Mermaid diagrams are centered and responsive */
.mermaid-diagram-wrapper .mermaid {
  text-align: center;
}

/* Responsive adjustments for small screens */
@media (max-width: 768px) {
  .mermaid-diagram-wrapper {
    padding: 12px;
  }
  
  .mermaid-diagram svg {
    max-width: 100%;
    font-size: 12px !important;
  }
  
  .mermaid-diagram svg .nodeLabel,
  .mermaid-diagram svg .edgeLabel,
  .mermaid-diagram svg text {
    font-size: 12px !important;
  }
}
