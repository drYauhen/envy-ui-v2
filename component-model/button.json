{
  "$schema": "./schema.json",
  "name": "button",
  "anatomy": {
    "parts": [
      { "id": "root", "required": true, "description": "Interactive surface that owns layout and focus" },
      { "id": "content", "required": true, "description": "Label container" },
      { "id": "startIcon", "required": false },
      { "id": "endIcon", "required": false },
      { "id": "separator", "required": false, "description": "Owned by the following segment in a stack", "owns": [] }
    ]
  },
  "geometry": {
    "dimensions": {
      "height": {
        "sm": "{eui.button.size.sm.height}",
        "md": "{eui.button.size.md.height}",
        "lg": "{eui.button.size.lg.height}"
      }
    },
    "spacing": {
      "paddingInline": {
        "sm": "{eui.button.size.sm.padding.inline}",
        "md": "{eui.button.size.md.padding.inline}",
        "lg": "{eui.button.size.lg.padding.inline}"
      },
      "gap": {
        "sm": "{eui.button.size.sm.gap}",
        "md": "{eui.button.size.md.gap}",
        "lg": "{eui.button.size.lg.gap}"
      }
    },
    "radii": {
      "shape": {
        "default": "{eui.button.shape.default.radius}",
        "round": "{eui.button.shape.round.radius}",
        "circle": "{eui.button.shape.circle.radius}"
      }
    },
    "borders": {
      "width": "{eui.button.border.width}",
      "style": "{eui.button.border.style}",
      "color": {
        "primary": "{eui.button.primary.border.base}",
        "secondary": "{eui.button.secondary.border.base}"
      }
    },
    "dividers": {
      "separator": {
        "inset": "{eui.button.separator.inset}",
        "thickness": "{eui.button.separator.thickness}",
        "ownership": "next"
      }
    }
  },
  "variants": [
    { "id": "intent", "type": "exclusive", "values": ["primary", "secondary"] },
    { "id": "size", "type": "exclusive", "values": ["sm", "md", "lg"] },
    { "id": "shape", "type": "exclusive", "values": ["default", "round", "circle"] },
    { "id": "stacked", "type": "exclusive", "values": ["none", "horizontal", "vertical"] }
  ],
  "rules": [
    {
      "description": "Stacked buttons remove internal borders; outer perimeter stays",
      "when": { "stacked": ["horizontal", "vertical"] },
      "then": {
        "parts": {
          "root": {
            "borders": {
              "internalAxis": "none",
              "perimeter": "preserve"
            },
            "dividers": {
              "separator": { "visible": true, "owner": "next", "inset": "{eui.button.separator.inset}", "thickness": "{eui.button.separator.thickness}" }
            }
          }
        }
      }
    },
    {
      "description": "Separator is rendered by the subsequent button",
      "when": { "stacked": ["horizontal", "vertical"] },
      "then": {
        "parts": {
          "separator": {
            "owner": "next",
            "placement": "between",
            "offset": "halfThickness"
          }
        }
      }
    },
    {
      "description": "Default layout contract: do not grow, do not shrink, no wrapping",
      "when": {},
      "then": {
        "layout": {
          "flex": { "grow": "{eui.button.layout.default.flex.grow}", "shrink": "{eui.button.layout.default.flex.shrink}", "basis": "{eui.button.layout.default.flex.basis}" },
          "whiteSpace": "{eui.button.layout.default.whiteSpace}"
        }
      }
    }
  ]
}
